# 📝 版本历史

记录系统的所有版本更新和变化。

---

## v6.0.0 (2025-10-14) ⭐ 最新版本

### 🌐 重大更新：多内容类型支持

**核心功能**：
- ✅ **内容类型系统** - 支持小说、新闻、文章、博客等多种类型
- ✅ **智能字段映射** - 根据内容类型自动适配字段名称
- ✅ **统一配置界面** - 智能向导和配置编辑器支持类型选择
- ✅ **全面UI优化** - 现代化渐变设计，彩色主题卡片
- ✅ **深色模式优化** - 全新配色方案，更好的视觉对比度
- ✅ **向后兼容** - 旧配置自动识别为小说类型

**支持的内容类型**：
1. 📚 **小说** - 小说标题、章节链接、章节内容
2. 📰 **新闻** - 新闻标题、新闻链接、新闻内容
3. 📝 **文章** - 文章标题、文章链接、文章内容
4. 💬 **博客** - 博客标题、博客链接、博客内容

**UI优化**：
- 🎨 渐变按钮设计（蓝→青、紫色系、青绿渐变）
- 🌈 配置卡片6种彩色渐变主题
- 💎 Glassmorphism磨砂质感按钮
- 📊 统计卡片彩色渐变背景
- 🎯 统一紫色主题导航
- 📱 移动端响应式优化

**技术改进**：
- 前端: React + contentTypes配置系统
- 配置: content_type字段 + field_mapping
- 后端: 自动兼容性处理

---

## v5.0.0 (2025-10-08)

### 🎯 重大更新：可视化元素选择器

**核心功能**：
- ✅ **可视化元素选择器** - 在真实页面上点击元素，自动生成XPath
- ✅ **智能XPath生成算法** - 7种生成策略，置信度高达98%
- ✅ **后端代理服务** - Playwright加载页面，自动注入脚本
- ✅ **实时页面交互** - iframe通信，所见即所得
- ✅ **自动属性配置** - 智能识别链接、图片等元素类型
- ✅ **完全向后兼容** - 保留所有传统配置方式

**XPath生成策略**：
1. 语义化属性 (95-98%) - data-testid, data-field, aria-label
2. 稳定ID (92%) - 避免动态ID
3. 语义化Class (85%) - title, author, content
4. 结构化路径 (75-82%) - 基于语义容器
5. 属性组合 (75-78%) - 多个稳定属性
6. 位置索引 (65-85%) - 父级约束位置
7. 文本匹配 (25%) - 降级策略（带警告）

**性能提升**：
- ⚡ 配置效率提升 6-9倍
- 🎯 XPath准确率 95%+
- 🛡️ 自动过滤动态内容
- 💡 降低XPath编写门槛

**技术架构**：
- 前端: React + Mantine + postMessage API
- 后端: Flask + Playwright
- 通信: 跨窗口消息传递
- 算法: 智能上下文分析

**新增文件** (~3200行代码):
- `frontend/public/element-selector.js` - iframe注入脚本
- `frontend/src/utils/enhanced-xpath-generator.js` - XPath生成算法
- `backend/routes/crawler_v5.py` - V5 API路由
- `frontend/src/components/VisualXPathSelector/` - 可视化选择器组件

**API接口**:
- `GET /api/crawler/v5/proxy-page` - 页面代理
- `POST /api/crawler/v5/validate-xpath` - XPath验证
- `GET /api/crawler/v5/health` - 健康检查

---

## v4.0.0 (2025-10-07)

### 🎨 重大更新：Mantine UI框架完整迁移

**核心成果**：
- ✅ 完全移除 Ant Design，迁移至 Mantine 7
- ✅ 10个核心组件全部迁移（5000+行代码）
- ✅ 主题系统：支持浅色/深色/跟随系统三种模式
- ✅ 深色模式 CSS 全面适配
- ✅ 零 linter 错误，零运行时错误

**新增功能**：
- 🌓 **主题切换系统** - 实时切换，无需刷新
- 📚 **书架双视图** - 网格视图和列表视图
- 🖼️ **默认封面** - 渐变背景+图标
- 🎯 **Modal 优化** - 更流畅的交互体验

**已迁移组件**：
- ConfigWizard.jsx - 配置向导
- CrawlerManager.jsx - 爬虫管理
- TaskManagerPage.jsx - 任务管理（含 WebSocket）
- NovelReader.jsx - 小说阅读器（1700+行）
- FlowEditorTab.jsx - 流程编辑器（1400+行）
- SimpleFlowEditorTab.jsx - 简化流程编辑器
- 4个节点组件（XPath/Regex/Processor/Palette）

**技术改进**：
- 使用 Tabler Icons 替代 Ant Design Icons
- 统一使用 `notifications.show()` 和 `modals.openConfirmModal()`
- 全局主题配置系统
- 优化的深色模式 CSS

---

## v3.0.0 (2025-10-06)

### 🎨 重大更新：可视化流程编辑器

**核心功能**：
- ✅ 拖拽式流程图配置界面
- ✅ 插件化清洗规则架构
- ✅ 节点化设计（提取器 + 处理器）
- ✅ 双向配置转换（流程图 ↔ JSON）
- ✅ 节点大小调整功能
- ✅ 索引选择器独立插件
- ✅ 网站基本信息对话框（保存时自动弹出）

**新增节点**：
- XPath提取器节点
- 正则提取器节点
- 索引选择器节点
- 去除空格处理器
- 字符替换处理器
- 正则替换处理器
- 合并数组处理器
- 分割字符串处理器
- 提取第一个处理器

**功能改进**：
- 📖 优化章节列表两层提取架构说明
- 🔄 支持从已配置字段加载流程进行编辑
- 🎯 智能字段选择和配置切换
- 📝 详细的配置说明和提示
- 🔍 完善的错误提示和验证

**文档更新**：
- 新增《章节列表两层提取说明.md》
- 新增《插件化流程编辑器TODO.md》
- 新增《流程配置视图使用指南.md》

---

## v2.0.1 (2025-10-05)

### 新增功能

- 🧙 **智能配置向导**
  - CSS选择器转XPath
  - 页面渲染预览
  - 字段智能识别
  - 配置实时测试

- 📡 **任务管理系统**
  - 实时进度追踪
  - WebSocket日志推送
  - 多任务并发
  - 错误重试

- 🔄 **智能文字替换**
  - 批量替换
  - 预览高亮
  - 正则表达式支持
  - 全书范围应用

- 📝 **小说信息编辑**
  - 标题编辑
  - 作者编辑
  - 封面更换
  - 小说删除

### 功能优化

- 优化阅读器界面
- 改进配置编辑体验
- 增强错误提示
- 提升系统稳定性

---

## v2.0.0 (2025-09-20)

### 架构重构

- 🏗️ **前后端分离** - React前端 + Flask后端
- 🗄️ **SQLAlchemy ORM** - 统一数据模型
- 🔌 **模块化设计** - 共享模块分离
- 📦 **代码重组** - 优化目录结构

### 新增功能

- 📖 **小说阅读器**
  - 现代化阅读界面
  - 5种阅读主题
  - 2种阅读模式
  - 书签和高亮
  - 阅读进度保存
  - 全文搜索

- 🎨 **可视化配置**
  - 表单视图 + JSON视图
  - 配置测试
  - 一键生成爬虫

### 技术升级

- React 18
- Flask 3.0
- SQLAlchemy 2.0
- Vite构建工具

---

## v1.5.0 (2025-08-15)

### 功能完善

- ✅ 配置文件管理
- ✅ XPath解析器
- ✅ 正则表达式支持
- ✅ 后处理规则
- ✅ 分页配置

### 性能优化

- 异步并发爬取
- 连接池优化
- 内存管理改进

---

## v1.0.0 (2025-07-01)

### 初始版本

**核心功能**：
- ✅ 通用爬虫引擎
- ✅ 配置化爬虫
- ✅ XPath提取
- ✅ 数据库存储

**技术栈**：
- Python 3.8
- Flask 2.0
- MySQL
- Requests + lxml

---

## 📅 版本计划

### v6.1.0 (计划中)

**功能增强**：
- [ ] 导出功能（TXT/EPUB/PDF）
- [ ] 更多内容类型支持
- [ ] 批量配置管理
- [ ] 配置模板市场

**技术改进**：
- [ ] TypeScript迁移
- [ ] API文档（Swagger）
- [ ] 单元测试覆盖率提升
- [ ] Docker支持

### v7.0.0 (规划中)

**重大更新**：
- [ ] 移动端App
- [ ] 云服务部署
- [ ] 分布式爬虫集群
- [ ] 机器学习内容分类
- [ ] 用户系统完善
- [ ] 插件市场

---

## 🔗 版本规范

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)：

- **主版本号 (MAJOR)**：不兼容的API修改
- **次版本号 (MINOR)**：向下兼容的功能性新增
- **修订号 (PATCH)**：向下兼容的问题修正

**示例**：
- `v6.0.0` → `v6.1.0`：新功能
- `v6.1.0` → `v6.1.1`：Bug修复
- `v6.1.1` → `v7.0.0`：破坏性更新

---

## 📝 更新日志格式

每个版本的更新日志包含：

- **日期**：版本发布日期
- **类型**：重大更新/功能增强/Bug修复
- **功能**：新增/改进的功能列表
- **技术**：技术栈变化
- **文档**：文档更新
- **破坏性变更**：不兼容的更新（如有）
- **迁移指南**：升级步骤（如需要）

---

## 🙏 贡献者

感谢所有为项目做出贡献的开发者！

---

## 📚 相关文档

- [快速开始](../getting-started/quick-start.md) - 开始使用
- [功能说明](../features/) - 详细功能文档
- [技术架构](../technical/architecture.md) - 架构设计

---

**返回**: [文档中心](../README.md)

