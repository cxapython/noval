# ğŸ“¦ 1Panel éƒ¨ç½²æŒ‡å—

## ğŸ“– ç®€ä»‹

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»å¦‚ä½•åœ¨å®‰è£…äº† [1Panel](https://1panel.cn/) çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½²å°è¯´çˆ¬è™«ç®¡ç†ç³»ç»Ÿã€‚

## ğŸ¯ 1Panel ç®€ä»‹

1Panel æ˜¯ä¸€ä¸ªç°ä»£åŒ–ã€å¼€æºçš„ Linux æœåŠ¡å™¨è¿ç»´ç®¡ç†é¢æ¿ï¼Œæä¾›ï¼š
- ğŸ³ Docker å®¹å™¨ç®¡ç†
- ğŸ“¦ åº”ç”¨å•†åº—
- ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†
- ğŸ“Š ç³»ç»Ÿç›‘æ§
- ğŸ”’ å®‰å…¨ç®¡ç†

å®˜ç½‘ï¼šhttps://1panel.cn/

## ğŸ“‹ å‰ç½®è¦æ±‚

### æœåŠ¡å™¨è¦æ±‚

| é¡¹ç›® | æœ€ä½é…ç½® | æ¨èé…ç½® |
|-----|---------|---------|
| **CPU** | 2æ ¸ | 4æ ¸+ |
| **å†…å­˜** | 2GB | 4GB+ |
| **ç¡¬ç›˜** | 20GB | 50GB+ |
| **ç³»ç»Ÿ** | Ubuntu 20.04+ / CentOS 7+ | Ubuntu 22.04 |
| **å¸¦å®½** | 1Mbps | 5Mbps+ |

### è½¯ä»¶è¦æ±‚

- âœ… å·²å®‰è£… 1Panelï¼ˆç‰ˆæœ¬ v1.8.0+ï¼‰
- âœ… 1Panel ä¸­å·²å®‰è£… Docker ç¯å¢ƒ
- âœ… æœåŠ¡å™¨å·²å¼€æ”¾å¿…è¦ç«¯å£

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹å¼1ï¼šä½¿ç”¨1Panelçš„Dockerç¼–æ’ï¼ˆæ¨èï¼‰â­

#### æ­¥éª¤1ï¼šç™»å½•1Panelç®¡ç†é¢æ¿

```bash
# è®¿é—®1Panel
https://ä½ çš„æœåŠ¡å™¨IP:é¢æ¿ç«¯å£

# é»˜è®¤ç«¯å£é€šå¸¸æ˜¯ 8090 æˆ–å…¶ä»–è‡ªå®šä¹‰ç«¯å£
```

#### æ­¥éª¤2ï¼šå‡†å¤‡é¡¹ç›®æ–‡ä»¶

**é€‰é¡¹Aï¼šåœ¨1Panelçš„ç»ˆç«¯ä¸­æ“ä½œ**

1. è¿›å…¥ **1Panel â†’ å®¹å™¨ â†’ ç»ˆç«¯**
2. æˆ–é€šè¿‡ SSH è¿æ¥æœåŠ¡å™¨

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /opt/noval
cd /opt/noval

# å…‹éš†é¡¹ç›®ï¼ˆéœ€è¦æœåŠ¡å™¨èƒ½è®¿é—®GitHubï¼‰
git clone https://github.com/cxapython/noval.git .

# æˆ–è€…ä¸Šä¼ é¡¹ç›®å‹ç¼©åŒ…åè§£å‹
```

**é€‰é¡¹Bï¼šä½¿ç”¨1Panelçš„æ–‡ä»¶ç®¡ç†å™¨ä¸Šä¼ **

1. è¿›å…¥ **1Panel â†’ æ–‡ä»¶ â†’ æ–‡ä»¶ç®¡ç†**
2. å¯¼èˆªåˆ° `/opt`
3. åˆ›å»º `noval` ç›®å½•
4. ä¸Šä¼ é¡¹ç›®æ–‡ä»¶ï¼ˆå‹ç¼©åŒ…ï¼‰
5. è§£å‹æ–‡ä»¶

#### æ­¥éª¤3ï¼šé…ç½®ç¯å¢ƒå˜é‡

åœ¨ `/opt/noval` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# åœ¨1Panelæ–‡ä»¶ç®¡ç†å™¨ä¸­åˆ›å»º .env æ–‡ä»¶
# æˆ–ä½¿ç”¨ç»ˆç«¯ï¼š
cd /opt/noval
cp env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶
vi .env
```

**.env é…ç½®ç¤ºä¾‹ï¼š**

```bash
# MySQL é…ç½®
MYSQL_ROOT_PASSWORD=your_secure_password_here
MYSQL_DATABASE=novel_db
MYSQL_USER=novel_user
MYSQL_PASSWORD=novel_user_password
MYSQL_PORT=3306

# Redis é…ç½®
REDIS_PORT=6379

# åº”ç”¨é…ç½®
BACKEND_PORT=5001
FRONTEND_PORT=8080    # é¿å…ä¸1Panelç«¯å£å†²çª

# Flask é…ç½®
FLASK_ENV=production
```

**âš ï¸ å®‰å…¨æç¤ºï¼š**
- åŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†ç 
- ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘12ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
- ä¸è¦ä½¿ç”¨ç¤ºä¾‹ä¸­çš„å¯†ç 

#### æ­¥éª¤4ï¼šåœ¨1Panelä¸­åˆ›å»ºç¼–æ’

1. **è¿›å…¥å®¹å™¨ç¼–æ’**
   - ç‚¹å‡» **1Panel â†’ å®¹å™¨ â†’ ç¼–æ’**
   - ç‚¹å‡» **åˆ›å»ºç¼–æ’**

2. **å¡«å†™ç¼–æ’ä¿¡æ¯**
   - **åç§°**: `noval`
   - **æè¿°**: `å°è¯´çˆ¬è™«ç®¡ç†ç³»ç»Ÿ`
   - **è·¯å¾„**: `/opt/noval` ï¼ˆé¡¹ç›®æ‰€åœ¨ç›®å½•ï¼‰

3. **ç¼–æ’å†…å®¹**
   - 1Panel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° `docker-compose.yml` æ–‡ä»¶
   - ç¡®è®¤ç¼–æ’å†…å®¹æ— è¯¯

4. **å¯åŠ¨ç¼–æ’**
   - ç‚¹å‡» **åˆ›å»ºå¹¶å¯åŠ¨**
   - ç­‰å¾…é•œåƒæ„å»ºå’Œå®¹å™¨å¯åŠ¨ï¼ˆé¦–æ¬¡çº¦5-10åˆ†é’Ÿï¼‰

#### æ­¥éª¤5ï¼šæŸ¥çœ‹éƒ¨ç½²çŠ¶æ€

åœ¨ **1Panel â†’ å®¹å™¨ â†’ å®¹å™¨** ä¸­æŸ¥çœ‹ï¼š

| å®¹å™¨å | çŠ¶æ€ | ç«¯å£ |
|-------|------|------|
| noval-mysql | è¿è¡Œä¸­ | 3306 |
| noval-redis | è¿è¡Œä¸­ | 6379 |
| noval-backend | è¿è¡Œä¸­ | 5001 |
| noval-nginx | è¿è¡Œä¸­ | 8080 |

#### æ­¥éª¤6ï¼šé…ç½®é˜²ç«å¢™

**åœ¨1Panelä¸­é…ç½®ï¼š**

1. è¿›å…¥ **1Panel â†’ å®‰å…¨ â†’ é˜²ç«å¢™**
2. æ·»åŠ ç«¯å£è§„åˆ™ï¼š

| ç«¯å£ | åè®® | ç­–ç•¥ | è¯´æ˜ |
|-----|------|------|------|
| 8080 | TCP | å…è®¸ | å‰ç«¯è®¿é—® |
| 5001 | TCP | æ‹’ç» | åç«¯APIï¼ˆå†…éƒ¨è®¿é—®ï¼‰ |
| 3306 | TCP | æ‹’ç» | MySQLï¼ˆå†…éƒ¨è®¿é—®ï¼‰ |
| 6379 | TCP | æ‹’ç» | Redisï¼ˆå†…éƒ¨è®¿é—®ï¼‰ |

**âš ï¸ å®‰å…¨å»ºè®®ï¼š**
- ä»…å¼€æ”¾å¿…è¦çš„å‰ç«¯ç«¯å£
- åç«¯å’Œæ•°æ®åº“ç«¯å£ä»…ä¾›å†…éƒ¨è®¿é—®
- è€ƒè™‘é…ç½® IP ç™½åå•

**äº‘æœåŠ¡å™¨å®‰å…¨ç»„ï¼š**

å¦‚æœä½¿ç”¨é˜¿é‡Œäº‘/è…¾è®¯äº‘/AWSç­‰ï¼Œè¿˜éœ€è¦åœ¨äº‘æœåŠ¡å•†æ§åˆ¶å°é…ç½®å®‰å…¨ç»„è§„åˆ™ã€‚

#### æ­¥éª¤7ï¼šè®¿é—®åº”ç”¨

```
http://ä½ çš„æœåŠ¡å™¨IP:8080
```

### æ–¹å¼2ï¼šä½¿ç”¨1Panelçš„åº”ç”¨å•†åº—ï¼ˆå¦‚æœæœ‰è‡ªå®šä¹‰åº”ç”¨ï¼‰

å¦‚æœä½ å°†æ­¤åº”ç”¨æ‰“åŒ…ä¸º1Panelåº”ç”¨æ¨¡æ¿ï¼š

1. è¿›å…¥ **1Panel â†’ åº”ç”¨å•†åº— â†’ æœ¬åœ°åº”ç”¨**
2. ä¸Šä¼ åº”ç”¨æ¨¡æ¿
3. ä¸€é”®å®‰è£…

**åº”ç”¨æ¨¡æ¿åˆ¶ä½œ**ï¼ˆå¯é€‰ï¼Œä¾›å‚è€ƒï¼‰ï¼š

```yaml
# app.yaml
name: noval
version: 5.0.0
title: å°è¯´çˆ¬è™«ç®¡ç†ç³»ç»Ÿ
description: é›†æˆçˆ¬è™«é…ç½®ç®¡ç†å’Œå°è¯´åœ¨çº¿é˜…è¯»çš„ä¸€ä½“åŒ–å¹³å°
icon: https://your-icon-url.png
type: docker-compose
params:
  - key: MYSQL_ROOT_PASSWORD
    label: MySQL Rootå¯†ç 
    type: password
    required: true
  - key: FRONTEND_PORT
    label: å‰ç«¯ç«¯å£
    type: number
    default: 8080
```

### æ–¹å¼3ï¼šä½¿ç”¨1Panelçš„ç»ˆç«¯æ‰‹åŠ¨éƒ¨ç½²

å¦‚æœç†Ÿæ‚‰å‘½ä»¤è¡Œï¼Œå¯ä»¥åœ¨1Panelç»ˆç«¯ä¸­ç›´æ¥æ“ä½œï¼š

```bash
# 1. è¿›å…¥1Panelç»ˆç«¯
# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/noval

# 3. æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# 4. æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# 5. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

## ğŸ“Š å®¹å™¨ç®¡ç†

### åœ¨1Panelä¸­ç®¡ç†å®¹å™¨

#### æŸ¥çœ‹å®¹å™¨çŠ¶æ€

1. **è¿›å…¥å®¹å™¨åˆ—è¡¨**
   - **1Panel â†’ å®¹å™¨ â†’ å®¹å™¨**
   - æŸ¥çœ‹æ‰€æœ‰ `noval-*` å®¹å™¨

2. **æŸ¥çœ‹å®¹å™¨è¯¦æƒ…**
   - ç‚¹å‡»å®¹å™¨åç§°
   - æŸ¥çœ‹èµ„æºä½¿ç”¨ã€æ—¥å¿—ã€ç»ˆç«¯ç­‰

#### æŸ¥çœ‹å®¹å™¨æ—¥å¿—

**æ–¹æ³•1ï¼š1Panelç•Œé¢**
1. è¿›å…¥ **1Panel â†’ å®¹å™¨ â†’ å®¹å™¨**
2. ç‚¹å‡»å®¹å™¨åç§°
3. åˆ‡æ¢åˆ° **æ—¥å¿—** æ ‡ç­¾

**æ–¹æ³•2ï¼šç»ˆç«¯å‘½ä»¤**
```bash
cd /opt/noval
docker-compose logs -f backend
docker-compose logs -f mysql
```

#### é‡å¯å®¹å™¨

**æ–¹æ³•1ï¼š1Panelç•Œé¢**
1. è¿›å…¥ **1Panel â†’ å®¹å™¨ â†’ å®¹å™¨**
2. é€‰æ‹©å®¹å™¨
3. ç‚¹å‡» **é‡å¯** æŒ‰é’®

**æ–¹æ³•2ï¼šç»ˆç«¯å‘½ä»¤**
```bash
cd /opt/noval
docker-compose restart backend
docker-compose restart
```

#### è¿›å…¥å®¹å™¨ç»ˆç«¯

**æ–¹æ³•1ï¼š1Panelç•Œé¢**
1. è¿›å…¥ **1Panel â†’ å®¹å™¨ â†’ å®¹å™¨**
2. ç‚¹å‡»å®¹å™¨åç§°
3. åˆ‡æ¢åˆ° **ç»ˆç«¯** æ ‡ç­¾

**æ–¹æ³•2ï¼šç»ˆç«¯å‘½ä»¤**
```bash
docker exec -it noval-backend bash
docker exec -it noval-mysql bash
```

#### åœæ­¢å’Œå¯åŠ¨

```bash
# åœæ­¢æ‰€æœ‰å®¹å™¨
cd /opt/noval
docker-compose down

# å¯åŠ¨æ‰€æœ‰å®¹å™¨
docker-compose up -d

# åœæ­¢å¹¶åˆ é™¤æ•°æ®ï¼ˆâš ï¸ æ…ç”¨ï¼‰
docker-compose down -v
```

## ğŸ—„ï¸ æ•°æ®åº“ç®¡ç†

### ä½¿ç”¨1Panelçš„æ•°æ®åº“ç®¡ç†åŠŸèƒ½

#### æ–¹æ³•1ï¼šä½¿ç”¨1Panelå†…ç½®çš„MySQLç®¡ç†

1. **æ·»åŠ æ•°æ®åº“è¿æ¥**
   - è¿›å…¥ **1Panel â†’ æ•°æ®åº“ â†’ MySQL**
   - ç‚¹å‡» **æ·»åŠ **
   - å¡«å†™è¿æ¥ä¿¡æ¯ï¼š
     ```
     åç§°: noval-mysql
     åœ°å€: 127.0.0.1
     ç«¯å£: 3306
     ç”¨æˆ·: root
     å¯†ç : ä½ çš„MYSQL_ROOT_PASSWORD
     ```

2. **ç®¡ç†æ•°æ®åº“**
   - æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨
   - æ‰§è¡ŒSQLæŸ¥è¯¢
   - å¤‡ä»½å’Œæ¢å¤

#### æ–¹æ³•2ï¼šä½¿ç”¨phpMyAdminï¼ˆå¦‚æœ1Panelå·²å®‰è£…ï¼‰

1. åœ¨1Panelåº”ç”¨å•†åº—å®‰è£… phpMyAdmin
2. é…ç½®è¿æ¥åˆ° noval-mysql
3. ä½¿ç”¨Webç•Œé¢ç®¡ç†æ•°æ®åº“

#### æ–¹æ³•3ï¼šå‘½ä»¤è¡Œæ“ä½œ

```bash
# è¿›å…¥MySQLå®¹å™¨
docker exec -it noval-mysql mysql -uroot -p

# æŸ¥çœ‹æ•°æ®åº“
SHOW DATABASES;

# ä½¿ç”¨æ•°æ®åº“
USE novel_db;

# æŸ¥çœ‹è¡¨
SHOW TABLES;
```

### æ•°æ®åº“å¤‡ä»½

#### ä½¿ç”¨1Panelå¤‡ä»½

1. è¿›å…¥ **1Panel â†’ æ•°æ®åº“ â†’ MySQL â†’ noval-mysql**
2. ç‚¹å‡» **å¤‡ä»½**
3. é€‰æ‹©å¤‡ä»½æ–¹å¼å’Œå­˜å‚¨ä½ç½®

#### ä½¿ç”¨å‘½ä»¤è¡Œå¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®åº“
docker exec noval-mysql mysqldump -uroot -pä½ çš„å¯†ç  novel_db > /opt/noval/backup/novel_db_$(date +%Y%m%d_%H%M%S).sql

# æ¢å¤æ•°æ®åº“
docker exec -i noval-mysql mysql -uroot -pä½ çš„å¯†ç  novel_db < /opt/noval/backup/novel_db_20250109_120000.sql
```

#### è‡ªåŠ¨å¤‡ä»½è„šæœ¬

åœ¨1Panelä¸­åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼š

```bash
#!/bin/bash
# æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½è„šæœ¬

BACKUP_DIR="/opt/noval/backup"
DATE=$(date +%Y%m%d_%H%M%S)
MYSQL_PASSWORD="ä½ çš„MYSQL_ROOT_PASSWORD"

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p $BACKUP_DIR

# å¤‡ä»½æ•°æ®åº“
docker exec noval-mysql mysqldump -uroot -p$MYSQL_PASSWORD novel_db > $BACKUP_DIR/novel_db_$DATE.sql

# å‹ç¼©å¤‡ä»½
gzip $BACKUP_DIR/novel_db_$DATE.sql

# ä¿ç•™æœ€è¿‘7å¤©çš„å¤‡ä»½
find $BACKUP_DIR -name "novel_db_*.sql.gz" -mtime +7 -delete

echo "å¤‡ä»½å®Œæˆ: $BACKUP_DIR/novel_db_$DATE.sql.gz"
```

**è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼š**
1. è¿›å…¥ **1Panel â†’ è®¡åˆ’ä»»åŠ¡**
2. åˆ›å»ºæ–°ä»»åŠ¡
3. ç±»å‹ï¼šShellè„šæœ¬
4. æ‰§è¡Œå‘¨æœŸï¼šæ¯å¤©å‡Œæ™¨2ç‚¹
5. è„šæœ¬å†…å®¹ï¼šç²˜è´´ä¸Šé¢çš„å¤‡ä»½è„šæœ¬

## ğŸ”§ é«˜çº§é…ç½®

### é…ç½®åŸŸåè®¿é—®

#### æ­¥éª¤1ï¼šåŸŸåè§£æ

åœ¨åŸŸåæœåŠ¡å•†å¤„æ·»åŠ Aè®°å½•ï¼š
```
noval.yourdomain.com  â†’  ä½ çš„æœåŠ¡å™¨IP
```

#### æ­¥éª¤2ï¼šåœ¨1Panelä¸­é…ç½®åå‘ä»£ç†

1. **è¿›å…¥ç½‘ç«™ç®¡ç†**
   - **1Panel â†’ ç½‘ç«™ â†’ ç½‘ç«™**
   - ç‚¹å‡» **åˆ›å»ºç½‘ç«™**

2. **å¡«å†™ç½‘ç«™ä¿¡æ¯**
   ```
   åŸŸå: noval.yourdomain.com
   ç±»å‹: åå‘ä»£ç†
   ä»£ç†åœ°å€: http://127.0.0.1:8080
   ```

3. **é…ç½®SSLè¯ä¹¦ï¼ˆå¯é€‰ä½†æ¨èï¼‰**
   - é€‰æ‹© **Let's Encrypt** è‡ªåŠ¨ç”³è¯·
   - æˆ–ä¸Šä¼ å·²æœ‰è¯ä¹¦
   - å¼€å¯ **å¼ºåˆ¶HTTPS**

4. **ä¿å­˜å¹¶åº”ç”¨**

ç°åœ¨å¯ä»¥é€šè¿‡åŸŸåè®¿é—®ï¼š
```
https://noval.yourdomain.com
```

### é…ç½®Nginxé«˜çº§é€‰é¡¹

åœ¨1Panelçš„åå‘ä»£ç†é…ç½®ä¸­æ·»åŠ ï¼š

```nginx
# å¢åŠ ä¸Šä¼ å¤§å°é™åˆ¶
client_max_body_size 100M;

# è¶…æ—¶é…ç½®
proxy_read_timeout 300s;
proxy_connect_timeout 75s;

# WebSocketæ”¯æŒ
proxy_http_version 1.1;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection "upgrade";
```

### èµ„æºé™åˆ¶

ç¼–è¾‘ `docker-compose.yml` æ·»åŠ èµ„æºé™åˆ¶ï¼š

```yaml
services:
  backend:
    deploy:
      resources:
        limits:
          cpus: '1.0'      # é™åˆ¶CPUä¸º1æ ¸
          memory: 1G       # é™åˆ¶å†…å­˜ä¸º1GB
        reservations:
          cpus: '0.5'      # é¢„ç•™0.5æ ¸
          memory: 512M     # é¢„ç•™512MB
```

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### ä½¿ç”¨1Panelç›‘æ§åŠŸèƒ½

1. **ç³»ç»Ÿç›‘æ§**
   - è¿›å…¥ **1Panel â†’ ç›‘æ§**
   - æŸ¥çœ‹CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œä½¿ç”¨æƒ…å†µ

2. **å®¹å™¨ç›‘æ§**
   - è¿›å…¥ **1Panel â†’ å®¹å™¨ â†’ å®¹å™¨**
   - æŸ¥çœ‹æ¯ä¸ªå®¹å™¨çš„èµ„æºä½¿ç”¨

3. **æ—¥å¿—ç›‘æ§**
   - å®šæœŸæŸ¥çœ‹å®¹å™¨æ—¥å¿—
   - å…³æ³¨é”™è¯¯å’Œå¼‚å¸¸ä¿¡æ¯

### è®¾ç½®å‘Šè­¦

åœ¨1Panelä¸­é…ç½®å‘Šè­¦è§„åˆ™ï¼š

1. è¿›å…¥ **1Panel â†’ ç›‘æ§ â†’ å‘Šè­¦**
2. åˆ›å»ºå‘Šè­¦è§„åˆ™ï¼š
   - CPUä½¿ç”¨ç‡ > 80%
   - å†…å­˜ä½¿ç”¨ç‡ > 80%
   - ç£ç›˜ä½¿ç”¨ç‡ > 85%
   - å®¹å™¨åœæ­¢è¿è¡Œ

### æ—¥å¸¸ç»´æŠ¤

#### æ¯æ—¥æ£€æŸ¥

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps -a

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats --no-stream

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs --tail=50 backend
```

#### æ¯å‘¨ç»´æŠ¤

```bash
# æ¸…ç†æ— ç”¨çš„é•œåƒå’Œå®¹å™¨
docker system prune -a

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h
docker system df
```

#### æ¯æœˆç»´æŠ¤

```bash
# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å¤‡ä»½æ•°æ®
# ä½¿ç”¨ä¸Šé¢çš„å¤‡ä»½è„šæœ¬

# æ£€æŸ¥æ—¥å¿—æ–‡ä»¶å¤§å°
du -sh /opt/noval/logs/*
```

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šå®¹å™¨æ— æ³•å¯åŠ¨

**æ’æŸ¥æ­¥éª¤ï¼š**

1. **æŸ¥çœ‹å®¹å™¨æ—¥å¿—**
   ```bash
   cd /opt/noval
   docker-compose logs backend
   docker-compose logs mysql
   ```

2. **æ£€æŸ¥ç«¯å£å ç”¨**
   ```bash
   netstat -tuln | grep 8080
   netstat -tuln | grep 5001
   ```

3. **æ£€æŸ¥ç£ç›˜ç©ºé—´**
   ```bash
   df -h
   docker system df
   ```

4. **é‡å¯å®¹å™¨**
   ```bash
   docker-compose restart
   ```

### é—®é¢˜2ï¼šæ— æ³•è®¿é—®å‰ç«¯

**æ’æŸ¥æ­¥éª¤ï¼š**

1. **æ£€æŸ¥å®¹å™¨çŠ¶æ€**
   ```bash
   docker ps | grep noval
   ```

2. **æ£€æŸ¥é˜²ç«å¢™**
   - åœ¨1Panelä¸­æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
   - æ£€æŸ¥äº‘æœåŠ¡å•†å®‰å…¨ç»„

3. **æµ‹è¯•æœ¬åœ°è®¿é—®**
   ```bash
   curl http://localhost:8080
   ```

4. **æŸ¥çœ‹Nginxæ—¥å¿—**
   ```bash
   docker logs noval-nginx
   ```

### é—®é¢˜3ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

**æ’æŸ¥æ­¥éª¤ï¼š**

1. **æ£€æŸ¥MySQLå®¹å™¨**
   ```bash
   docker ps | grep mysql
   docker logs noval-mysql
   ```

2. **æµ‹è¯•æ•°æ®åº“è¿æ¥**
   ```bash
   docker exec -it noval-mysql mysql -uroot -p
   ```

3. **æ£€æŸ¥ç¯å¢ƒå˜é‡**
   ```bash
   cat .env | grep MYSQL
   ```

4. **é‡å¯MySQLå®¹å™¨**
   ```bash
   docker-compose restart mysql
   # ç­‰å¾…30ç§’åé‡å¯åç«¯
   docker-compose restart backend
   ```

### é—®é¢˜4ï¼šé•œåƒæ„å»ºå¤±è´¥

**æ’æŸ¥æ­¥éª¤ï¼š**

1. **æ£€æŸ¥ç½‘ç»œè¿æ¥**
   ```bash
   ping 8.8.8.8
   curl https://www.google.com
   ```

2. **ä½¿ç”¨å›½å†…é•œåƒæº**
   
   ç¼–è¾‘ `Dockerfile`ï¼Œæ·»åŠ é•œåƒæºï¼š
   ```dockerfile
   # åœ¨ pip install å‘½ä»¤åæ·»åŠ 
   RUN pip install --no-cache-dir -r requirements.txt \
       -i https://mirrors.aliyun.com/pypi/simple/
   ```

3. **æ‰‹åŠ¨æ„å»º**
   ```bash
   cd /opt/noval
   docker-compose build --no-cache backend
   ```

### é—®é¢˜5ï¼šæ€§èƒ½é—®é¢˜

**ä¼˜åŒ–æ–¹æ¡ˆï¼š**

1. **å¢åŠ èµ„æºé™åˆ¶**
   - ç¼–è¾‘ `docker-compose.yml`
   - å¢åŠ å†…å­˜å’ŒCPUé™åˆ¶

2. **ä¼˜åŒ–MySQL**
   ```bash
   # è¿›å…¥MySQLå®¹å™¨
   docker exec -it noval-mysql bash
   
   # ç¼–è¾‘é…ç½®
   vi /etc/mysql/my.cnf
   
   # æ·»åŠ ä¼˜åŒ–å‚æ•°
   [mysqld]
   innodb_buffer_pool_size = 512M
   max_connections = 200
   ```

3. **æ¸…ç†æ—¥å¿—**
   ```bash
   cd /opt/noval
   rm -rf logs/*.log
   docker-compose restart
   ```

## ğŸ“š å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### 1Panelç›¸å…³

```bash
# é‡å¯1Panel
systemctl restart 1panel

# æŸ¥çœ‹1Panelæ—¥å¿—
journalctl -u 1panel -f

# 1Panelæ•°æ®ç›®å½•
/opt/1panel
```

### Dockerç®¡ç†

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/noval

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# è¿›å…¥å®¹å™¨
docker exec -it noval-backend bash

# æŸ¥çœ‹èµ„æº
docker stats
```

### æ•°æ®åº“æ“ä½œ

```bash
# è¿æ¥æ•°æ®åº“
docker exec -it noval-mysql mysql -uroot -p

# å¤‡ä»½æ•°æ®åº“
docker exec noval-mysql mysqldump -uroot -på¯†ç  novel_db > backup.sql

# æ¢å¤æ•°æ®åº“
docker exec -i noval-mysql mysql -uroot -på¯†ç  novel_db < backup.sql
```

## ğŸ” å®‰å…¨å»ºè®®

### 1. å¯†ç å®‰å…¨

- âœ… ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘12ä½ï¼‰
- âœ… å®šæœŸæ›´æ¢å¯†ç 
- âœ… ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†ç 
- âœ… ä½¿ç”¨ `.env` æ–‡ä»¶ç®¡ç†æ•æ„Ÿä¿¡æ¯

### 2. ç½‘ç»œå®‰å…¨

- âœ… ä»…å¼€æ”¾å¿…è¦ç«¯å£
- âœ… é…ç½®é˜²ç«å¢™è§„åˆ™
- âœ… ä½¿ç”¨HTTPSè®¿é—®
- âœ… é…ç½®IPç™½åå•ï¼ˆå¦‚æœå¯èƒ½ï¼‰

### 3. ç³»ç»Ÿå®‰å…¨

- âœ… å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œè½¯ä»¶
- âœ… ç¦ç”¨rootç™»å½•
- âœ… ä½¿ç”¨SSHå¯†é’¥è®¤è¯
- âœ… å®‰è£…fail2bané˜²æ­¢æš´åŠ›ç ´è§£

### 4. æ•°æ®å®‰å…¨

- âœ… å®šæœŸå¤‡ä»½æ•°æ®åº“
- âœ… å¤‡ä»½åˆ°å¼‚åœ°å­˜å‚¨
- âœ… æµ‹è¯•å¤‡ä»½æ¢å¤æµç¨‹
- âœ… åŠ å¯†æ•æ„Ÿæ•°æ®

### 5. å®¹å™¨å®‰å…¨

- âœ… ä½¿ç”¨å®˜æ–¹é•œåƒ
- âœ… å®šæœŸæ›´æ–°é•œåƒ
- âœ… é™åˆ¶å®¹å™¨èµ„æº
- âœ… ä¸ä½¿ç”¨rootç”¨æˆ·è¿è¡Œå®¹å™¨

## ğŸ“ è·å–å¸®åŠ©

- **1Panelå®˜æ–¹æ–‡æ¡£**: https://1panel.cn/docs/
- **é¡¹ç›®Issue**: https://github.com/cxapython/noval/issues
- **1Panelç¤¾åŒº**: https://bbs.fit2cloud.com/

## ğŸ‰ éƒ¨ç½²æˆåŠŸ

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ çš„å°è¯´çˆ¬è™«ç®¡ç†ç³»ç»Ÿåº”è¯¥å·²ç»åœ¨1Panelç¯å¢ƒä¸­æˆåŠŸè¿è¡Œäº†ï¼

**è®¿é—®åœ°å€ï¼š**
- å‰ç«¯: `http://ä½ çš„æœåŠ¡å™¨IP:8080` æˆ– `https://ä½ çš„åŸŸå`
- åç«¯API: `http://ä½ çš„æœåŠ¡å™¨IP:5001`ï¼ˆå»ºè®®ä»…å†…éƒ¨è®¿é—®ï¼‰

**ä¸‹ä¸€æ­¥ï¼š**
1. ç™»å½•å‰ç«¯ç•Œé¢
2. é…ç½®çˆ¬è™«è§„åˆ™
3. å¼€å§‹ä½¿ç”¨ç³»ç»Ÿ

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸŠ

