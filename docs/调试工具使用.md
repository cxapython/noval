# 🔍 配置调试工具 - 快速参考

## 在 PyCharm 中直接调试配置

### 📝 三步快速开始

1. **打开文件**：`backend/generic_crawler_debug.py`

2. **修改配置**（文件末尾）：
```python
CONFIG_FILE = project_root / "configs" / "config_ikbook8.json"
BOOK_ID = "10683"
TEST_CHAPTER_INDEX = 0
```

3. **运行**：右键 → Run 或 Debug

### 📊 输出内容

- ✅ **小说信息**：标题、作者 + 解析详情
- ✅ **章节列表**：所有章节 + URL
- ✅ **章节内容**：完整内容 + 清理规则匹配情况

### 🔍 关键信息 - 匹配状态

```
规则1: replace
  匹配: ✅ (精确匹配)  ← 直接找到并替换
  匹配: ✅ (智能匹配)  ← 通过空格标准化匹配
  匹配: ❌ 未匹配      ← 需要调整配置
  匹配上下文:
    替换前: ...广告内容...
    替换后: ......
```

### 💡 测试场景

```python
# 测试新配置
CONFIG_FILE = project_root / "configs" / "config_新网站.json"
BOOK_ID = "新书ID"

# 只测试内容解析
TEST_NOVEL_INFO = False
TEST_CHAPTER_LIST = False
TEST_CHAPTER_CONTENT = True

# 测试第10章
TEST_CHAPTER_INDEX = 9
```

### 🐛 问题排查

| 问题 | 排查方法 |
|------|----------|
| 内容为空 | 查看匹配状态，❌ 表示XPath需调整 |
| 清理不生效 | 查看匹配上下文，检查 `old` 参数 |
| 配置路径错误 | 使用相对路径 `project_root / "configs/..."` |

### 📁 输出文件

```
logs/debug_chapter_0_content.txt  ← 完整章节内容
```

### 🎯 调试技巧

1. 调试时 `MAX_WORKERS = 1`
2. 设置断点查看变量
3. 先测试小说信息和章节列表
4. 查看匹配上下文诊断问题

---

**详细文档**：[通用爬虫使用指南.md](./通用爬虫使用指南.md)  
**文件位置**：`backend/generic_crawler_debug.py`

