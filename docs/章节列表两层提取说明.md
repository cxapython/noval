# ğŸ“– ç« èŠ‚åˆ—è¡¨ä¸¤å±‚æå–æ¶æ„è¯´æ˜

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

ç« èŠ‚åˆ—è¡¨ä½¿ç”¨**ä¸¤å±‚æå–æ¶æ„**ï¼š
1. **ç¬¬1å±‚ï¼ˆitemsï¼‰**ï¼šæ‰¹é‡é€‰æ‹©æ‰€æœ‰ç« èŠ‚å®¹å™¨
2. **ç¬¬2å±‚ï¼ˆtitle/urlï¼‰**ï¼šåœ¨æ¯ä¸ªå®¹å™¨å†…æå–æ•°æ®

## ğŸ“‹ HTMLç»“æ„ç¤ºä¾‹

å‡è®¾ç½‘é¡µHTMLç»“æ„å¦‚ä¸‹ï¼š

```html
<div class="chapter-box">
  <ul class="chapter-list">
    <li class="chapter-item">
      <a href="/chapter/1.html">ç¬¬ä¸€ç«  å¼€å§‹</a>
    </li>
    <li class="chapter-item">
      <a href="/chapter/2.html">ç¬¬äºŒç«  ä¿®ç‚¼</a>
    </li>
    <li class="chapter-item">
      <a href="/chapter/3.html">ç¬¬ä¸‰ç«  çªç ´</a>
    </li>
  </ul>
</div>
```

## âš™ï¸ é…ç½®ç¤ºä¾‹

### å®Œæ•´é…ç½®

```json
{
  "chapter_list": {
    "items": {
      "expression": "//ul[@class='chapter-list']/li",
      "type": "xpath"
    },
    "title": {
      "expression": "./a/text()",
      "type": "xpath",
      "process": [
        { "method": "strip" }
      ]
    },
    "url": {
      "expression": "./a/@href",
      "type": "xpath"
    }
  }
}
```

### è¯¦ç»†è§£é‡Š

#### 1ï¸âƒ£ ç¬¬ä¸€å±‚ï¼šitemsï¼ˆåˆ—è¡¨é¡¹é€‰æ‹©å™¨ï¼‰

**XPath:** `//ul[@class='chapter-list']/li`

**ä½œç”¨:** ä»æ•´ä¸ªé¡µé¢é€‰æ‹©æ‰€æœ‰çš„ `<li>` å…ƒç´ 

**ç»“æœ:** è¿”å›3ä¸ªå…ƒç´ 
```
[
  <li class="chapter-item">...</li>,
  <li class="chapter-item">...</li>,
  <li class="chapter-item">...</li>
]
```

#### 2ï¸âƒ£ ç¬¬äºŒå±‚ï¼štitleï¼ˆç« èŠ‚æ ‡é¢˜ï¼‰

**XPath:** `./a/text()`

**è¯´æ˜:**
- **`.`** è¡¨ç¤ºå½“å‰èŠ‚ç‚¹ï¼ˆå³å•ä¸ªliå…ƒç´ ï¼‰
- è¿™æ˜¯**ç›¸å¯¹è·¯å¾„**ï¼Œåœ¨æ¯ä¸ªliå†…éƒ¨æ‰§è¡Œ

**å¯¹æ¯ä¸ªliæ‰§è¡Œ:**
- ç¬¬1ä¸ªli: `./a/text()` â†’ "ç¬¬ä¸€ç«  å¼€å§‹"
- ç¬¬2ä¸ªli: `./a/text()` â†’ "ç¬¬äºŒç«  ä¿®ç‚¼"  
- ç¬¬3ä¸ªli: `./a/text()` â†’ "ç¬¬ä¸‰ç«  çªç ´"

#### 3ï¸âƒ£ ç¬¬äºŒå±‚ï¼šurlï¼ˆç« èŠ‚é“¾æ¥ï¼‰

**XPath:** `./a/@href`

**è¯´æ˜:**
- `./a/@href` æå–aæ ‡ç­¾çš„hrefå±æ€§
- ç›¸å¯¹è·¯å¾„ï¼Œåœ¨æ¯ä¸ªliå†…éƒ¨æ‰§è¡Œ

**å¯¹æ¯ä¸ªliæ‰§è¡Œ:**
- ç¬¬1ä¸ªli: `./a/@href` â†’ "/chapter/1.html"
- ç¬¬2ä¸ªli: `./a/@href` â†’ "/chapter/2.html"
- ç¬¬3ä¸ªli: `./a/@href` â†’ "/chapter/3.html"

## ğŸ”„ åç«¯å¤„ç†æµç¨‹

```python
# ä¼ªä»£ç å±•ç¤ºåç«¯å¤„ç†é€»è¾‘

# ç¬¬1å±‚ï¼šæ‰¹é‡é€‰æ‹©
items_xpath = "//ul[@class='chapter-list']/li"
chapter_items = root.xpath(items_xpath)  # è¿”å›æ‰€æœ‰liå…ƒç´ 

chapters = []

# ç¬¬2å±‚ï¼šå¯¹æ¯ä¸ªå®¹å™¨å…ƒç´ æ‰§è¡Œæå–
for item in chapter_items:
    # åœ¨å½“å‰itemå†…éƒ¨æå–title
    title = item.xpath("./a/text()").get()
    
    # åœ¨å½“å‰itemå†…éƒ¨æå–url
    url = item.xpath("./a/@href").get()
    
    chapters.append({
        'title': title,
        'url': url
    })

# ç»“æœï¼š
# [
#   {'title': 'ç¬¬ä¸€ç«  å¼€å§‹', 'url': '/chapter/1.html'},
#   {'title': 'ç¬¬äºŒç«  ä¿®ç‚¼', 'url': '/chapter/2.html'},
#   {'title': 'ç¬¬ä¸‰ç«  çªç ´', 'url': '/chapter/3.html'}
# ]
```

## ğŸ’¡ å¸¸è§åœºæ™¯å’Œç¤ºä¾‹

### åœºæ™¯1ï¼šæ ‡é¢˜å’Œé“¾æ¥åœ¨åŒä¸€ä¸ªæ ‡ç­¾

```html
<ul>
  <li><a href="/ch1.html">ç¬¬ä¸€ç« </a></li>
  <li><a href="/ch2.html">ç¬¬äºŒç« </a></li>
</ul>
```

**é…ç½®:**
```json
{
  "items": { "expression": "//ul/li" },
  "title": { "expression": "./a/text()" },
  "url": { "expression": "./a/@href" }
}
```

### åœºæ™¯2ï¼šæ ‡é¢˜å’Œé“¾æ¥åˆ†ç¦»

```html
<ul>
  <li data-url="/ch1.html">
    <span class="title">ç¬¬ä¸€ç« </span>
  </li>
  <li data-url="/ch2.html">
    <span class="title">ç¬¬äºŒç« </span>
  </li>
</ul>
```

**é…ç½®:**
```json
{
  "items": { "expression": "//ul/li" },
  "title": { "expression": ".//span[@class='title']/text()" },
  "url": { "expression": "./@data-url" }
}
```

### åœºæ™¯3ï¼šåµŒå¥—ç»“æ„

```html
<div class="chapter-box">
  <div class="item">
    <div class="info">
      <h3>ç¬¬ä¸€ç«  æ ‡é¢˜</h3>
      <a href="/ch1.html" class="link">é˜…è¯»</a>
    </div>
  </div>
</div>
```

**é…ç½®:**
```json
{
  "items": { "expression": "//div[@class='chapter-box']/div[@class='item']" },
  "title": { "expression": ".//h3/text()" },
  "url": { "expression": ".//a[@class='link']/@href" }
}
```

## âš ï¸ å¸¸è§é”™è¯¯

### âŒ é”™è¯¯1ï¼šç¬¬2å±‚ä½¿ç”¨ç»å¯¹è·¯å¾„

```json
{
  "items": { "expression": "//ul/li" },
  "title": { "expression": "//ul/li/a/text()" }  // âŒ é”™è¯¯ï¼
}
```

**é—®é¢˜:** titleä½¿ç”¨äº†ç»å¯¹è·¯å¾„ï¼Œä¼šä»æ•´ä¸ªé¡µé¢æŸ¥æ‰¾ï¼Œè€Œä¸æ˜¯åœ¨å½“å‰itemå†…æŸ¥æ‰¾

**æ­£ç¡®åšæ³•:**
```json
{
  "items": { "expression": "//ul/li" },
  "title": { "expression": "./a/text()" }  // âœ… æ­£ç¡®ï¼ä½¿ç”¨ç›¸å¯¹è·¯å¾„
}
```

### âŒ é”™è¯¯2ï¼šå¿˜è®° `.` å‰ç¼€

```json
{
  "items": { "expression": "//ul/li" },
  "title": { "expression": "a/text()" }  // âŒ å¯èƒ½æœ‰é—®é¢˜
}
```

**è¯´æ˜:** è™½ç„¶æŸäº›æƒ…å†µä¸‹å¯ä»¥å·¥ä½œï¼Œä½†æœ€å¥½æ˜ç¡®ä½¿ç”¨ `./` è¡¨ç¤ºç›¸å¯¹è·¯å¾„

**æ¨èåšæ³•:**
```json
{
  "items": { "expression": "//ul/li" },
  "title": { "expression": "./a/text()" }  // âœ… æ¨è
}
```

### âŒ é”™è¯¯3ï¼šitemsé€‰æ‹©è¿‡äºå…·ä½“

```json
{
  "items": { "expression": "//ul/li/a" }  // âŒ ä¸å¥½
}
```

**é—®é¢˜:** itemsåº”è¯¥é€‰æ‹©å®Œæ•´çš„å®¹å™¨ï¼Œè€Œä¸æ˜¯å…·ä½“çš„å…ƒç´ 

**æ­£ç¡®åšæ³•:**
```json
{
  "items": { "expression": "//ul/li" }  // âœ… æ­£ç¡®
}
```

## ğŸ“ å­¦ä¹ å»ºè®®

1. **æŸ¥çœ‹ç½‘é¡µæºç **
   - ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
   - æ‰¾åˆ°ç« èŠ‚åˆ—è¡¨çš„HTMLç»“æ„
   - ç¡®å®šå®¹å™¨å…ƒç´ å’Œå†…éƒ¨å…ƒç´ 

2. **å…ˆé…ç½®items**
   - é€‰æ‹©èƒ½åŒ…å«æ ‡é¢˜å’Œé“¾æ¥çš„æœ€å°å®¹å™¨
   - ç¡®ä¿é€‰æ‹©åˆ°æ‰€æœ‰ç« èŠ‚é¡¹

3. **å†é…ç½®titleå’Œurl**
   - åœ¨å•ä¸ªå®¹å™¨å†…æµ‹è¯•XPath
   - ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆä»¥ `.` å¼€å¤´ï¼‰
   - éªŒè¯æ˜¯å¦èƒ½æ­£ç¡®æå–

4. **ä½¿ç”¨æµ‹è¯•åŠŸèƒ½**
   - åœ¨é…ç½®é¡µé¢ä½¿ç”¨"æµ‹è¯•"æŒ‰é’®
   - æŸ¥çœ‹æå–ç»“æœæ˜¯å¦æ­£ç¡®
   - æ ¹æ®ç»“æœè°ƒæ•´XPath

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [XPathè¯­æ³•å‚è€ƒ](./XPathè¯­æ³•è¯´æ˜.md)
- [é…ç½®å‘å¯¼ä½¿ç”¨æŒ‡å—](./é…ç½®å‘å¯¼ä½¿ç”¨æŒ‡å—.md)
- [æµç¨‹ç¼–è¾‘å™¨ä½¿ç”¨æŒ‡å—](./æµç¨‹é…ç½®è§†å›¾ä½¿ç”¨æŒ‡å—.md)
