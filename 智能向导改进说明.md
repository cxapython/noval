# ðŸŽ‰ æ™ºèƒ½å‘å¯¼æ”¹è¿›å®Œæˆ

## ðŸ“‹ é—®é¢˜æ€»ç»“

ä½ æå‡ºçš„ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š

1. âŒ **XPathç”Ÿæˆä½¿ç”¨æ–‡æœ¬åŒ¹é…** - å¦‚ `//p[contains(text(), "ä½œè€…ï¼šå¤§å±±")]`ï¼Œæ¢æ–‡ç« å°±å¤±æ•ˆ
2. âŒ **æ²¡æœ‰æ‰‹åŠ¨è¾“å…¥é€‰é¡¹** - å¦‚æžœè‡ªåŠ¨ç”Ÿæˆçš„éƒ½ä¸åˆé€‚ï¼Œæ— æ³•è‡ªå®šä¹‰
3. âŒ **ç¼ºå°‘è§„åˆ™æ¸…æ´—åŠŸèƒ½** - é…ç½®ç®¡ç†æœ‰ï¼Œä½†æ™ºèƒ½å‘å¯¼æ²¡æœ‰

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. XPathç”Ÿæˆç­–ç•¥ä¼˜åŒ–

**æ”¹è¿›å‰**:
```xpath
//p[contains(text(), "ä½œè€…ï¼šå¤§å±±")]  âŒ ä¾èµ–å…·ä½“æ–‡æœ¬
```

**æ”¹è¿›åŽ** (æŒ‰ä¼˜å…ˆçº§ç”Ÿæˆå¤šä¸ªé€‰é¡¹):
```xpath
âœ… //div[@id="author"]                    # IDé€‰æ‹©å™¨ï¼ˆæŽ¨èï¼‰
âš¡ //div[@class="book-author"]            # å®Œæ•´Class
ðŸŽ¯ //div[contains(@class, "author")]      # å•ä¸ªClass
ðŸ—ï¸ //div[contains(@class, "info")]//span  # ç»“æž„è·¯å¾„
âš ï¸ //span                                 # æ ‡ç­¾åï¼ˆå¯èƒ½ä¸ç²¾ç¡®ï¼‰
```

**ä¼˜åŠ¿**:
- ä¸ä¾èµ–å…·ä½“æ–‡æœ¬å†…å®¹
- æ¢æ–‡ç« ä¾ç„¶æœ‰æ•ˆ
- æŒ‰ç¨³å®šæ€§æŽ’åºï¼Œä¼˜å…ˆæŽ¨èæœ€å¯é çš„
- é¢œè‰²æ ‡ç­¾åŒºåˆ†ï¼ˆç»¿è‰²=æŽ¨èï¼Œè“è‰²=ä¸€èˆ¬ï¼Œæ©™è‰²=æ…Žç”¨ï¼‰

---

### 2. æ‰‹åŠ¨è¾“å…¥XPathé€‰é¡¹

åœ¨è‡ªåŠ¨ç”Ÿæˆçš„XPathå»ºè®®ä¸‹æ–¹ï¼Œæ·»åŠ äº† **"æˆ–æ‰‹åŠ¨è¾“å…¥XPath"** åŒºåŸŸï¼š

![æ‰‹åŠ¨è¾“å…¥](https://via.placeholder.com/600x100?text=Manual+XPath+Input+Box)

**ä½¿ç”¨åœºæ™¯**:
- å¤æ‚çš„XPathè·¯å¾„
- ä½¿ç”¨XPathé«˜çº§åŠŸèƒ½
- è‡ªåŠ¨ç”Ÿæˆçš„éƒ½ä¸åˆé€‚

**ç¤ºä¾‹**:
```xpath
//div[@class='content']/p[position()>1 and position()<last()]
```

---

### 3. è§„åˆ™æ¸…æ´—ï¼ˆProcessï¼‰ç¼–è¾‘åŠŸèƒ½

ä¸ºæ¯ä¸ªå·²è¯†åˆ«å­—æ®µæ·»åŠ äº† **"ç¼–è¾‘è§„åˆ™"** æŒ‰é’®ï¼š

**åŠŸèƒ½**:
- âœ… å¯è§†åŒ–ç¼–è¾‘processè§„åˆ™
- âœ… æ”¯æŒæ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹è§„åˆ™
- âœ… æŒ‰é¡ºåºæ‰§è¡Œå¤šä¸ªå¤„ç†æ­¥éª¤
- âœ… æ”¯æŒ9ç§å¤„ç†æ–¹æ³•

**æ”¯æŒçš„æ–¹æ³•**:
| æ–¹æ³• | è¯´æ˜Ž | ç¤ºä¾‹ |
|------|------|------|
| strip | åŽ»é™¤ç©ºç™½ | `"  æ–‡æœ¬  "` â†’ `"æ–‡æœ¬"` |
| replace | å­—ç¬¦ä¸²æ›¿æ¢ | `"ä½œè€…ï¼šå¼ ä¸‰"` â†’ `"å¼ ä¸‰"` |
| re_sub | æ­£åˆ™æ›¿æ¢ | `"ç¬¬  1   ç« "` â†’ `"ç¬¬1ç« "` |
| join | è¿žæŽ¥æ•°ç»„ | `["ç¬¬ä¸€æ®µ", "ç¬¬äºŒæ®µ"]` â†’ `"ç¬¬ä¸€æ®µ\nç¬¬äºŒæ®µ"` |
| split | åˆ†å‰²å­—ç¬¦ä¸² | `"æ ‡ç­¾1,æ ‡ç­¾2"` â†’ `["æ ‡ç­¾1", "æ ‡ç­¾2"]` |
| upper | è½¬å¤§å†™ | `"abc"` â†’ `"ABC"` |
| lower | è½¬å°å†™ | `"ABC"` â†’ `"abc"` |
| capitalize | é¦–å­—æ¯å¤§å†™ | `"hello"` â†’ `"Hello"` |
| get_item | èŽ·å–åˆ—è¡¨é¡¹ | `["a", "b", "c"][1]` â†’ `"b"` |

**ç¤ºä¾‹é…ç½®**:
```json
{
  "process": [
    { "method": "strip", "params": {} },
    { "method": "replace", "params": { "old": "ä½œè€…ï¼š", "new": "" } },
    { "method": "replace", "params": { "old": "æ¥æºï¼šXXXç½‘", "new": "" } }
  ]
}
```

---

## ðŸŽ¯ ä½¿ç”¨æ¼”ç¤º

### åœºæ™¯ï¼šè¯†åˆ«å°è¯´ä½œè€…å­—æ®µ

#### æ­¥éª¤1ï¼šç”ŸæˆXPathå»ºè®®
è¾“å…¥CSSé€‰æ‹©å™¨ï¼š`.book-author`

ç³»ç»Ÿç”Ÿæˆï¼š
```
âœ… IDé€‰æ‹©å™¨ï¼ˆæŽ¨èï¼‰        //span[@id="author-name"]
âš¡ å®Œæ•´Classï¼ˆç²¾ç¡®ï¼‰       //span[@class="book-author"]
ðŸŽ¯ å•ä¸ªClass: book-author  //span[contains(@class, "book-author")]
ðŸ—ï¸ ç»“æž„è·¯å¾„ï¼ˆé€šç”¨ï¼‰       //div[contains(@class, "book-info")]//span
âš ï¸ æ ‡ç­¾åï¼ˆå¯èƒ½ä¸ç²¾ç¡®ï¼‰   //span
```

**æç¤º**: ç»¿è‰²æ ‡ç­¾è¡¨ç¤ºæŽ¨èä½¿ç”¨ï¼Œè“è‰²æ ‡ç­¾è¡¨ç¤ºä¸€èˆ¬é€šç”¨ï¼Œæ©™è‰²æ ‡ç­¾è¡¨ç¤ºå¯èƒ½ä¸ç²¾ç¡®ã€‚

#### æ­¥éª¤2ï¼šé€‰æ‹©æˆ–æ‰‹åŠ¨è¾“å…¥
- **æ–¹å¼A**: ç‚¹å‡»"é€‰æ‹©"æŒ‰é’®ï¼Œé€‰æ‹©ä¸€ä¸ªå»ºè®®
- **æ–¹å¼B**: åœ¨ä¸‹æ–¹"æ‰‹åŠ¨è¾“å…¥"æ¡†è¾“å…¥è‡ªå®šä¹‰XPath

#### æ­¥éª¤3ï¼šç¼–è¾‘è§„åˆ™
1. ç‚¹å‡»"ä¿å­˜æ­¤å­—æ®µ"
2. åœ¨å·²è¯†åˆ«å­—æ®µåˆ—è¡¨æ‰¾åˆ°è¯¥å­—æ®µ
3. ç‚¹å‡»"ç¼–è¾‘è§„åˆ™"æŒ‰é’®
4. æ·»åŠ å¤„ç†è§„åˆ™ï¼š
   - è§„åˆ™1: stripï¼ˆåŽ»é™¤ç©ºç™½ï¼‰
   - è§„åˆ™2: replaceï¼Œold="ä½œè€…ï¼š", new=""ï¼ˆåŽ»é™¤å‰ç¼€ï¼‰
5. ä¿å­˜è§„åˆ™

#### ç»“æžœ
```
åŽŸå§‹å†…å®¹: "  ä½œè€…ï¼šå¼ ä¸‰  "
å¤„ç†åŽ:   "å¼ ä¸‰"
```

---

## ðŸ“¸ ç•Œé¢æˆªå›¾è¯´æ˜Ž

### æ”¹è¿›å‰çš„é—®é¢˜
```
XPathå»ºè®®: //p[contains(text(), "ä½œè€…ï¼šå¤§å±±")]
é—®é¢˜: æ¢ä¸€ç¯‡æ–‡ç« ï¼Œä½œè€…åä¸åŒï¼ŒXPathå°±å¤±æ•ˆäº† âŒ
```

### æ”¹è¿›åŽçš„æ•ˆæžœ
```
å¤šä¸ªé€šç”¨XPathé€‰é¡¹:
âœ… //div[@id="author"]              <- æŽ¨èä½¿ç”¨
âš¡ //div[@class="book-author"]
ðŸŽ¯ //div[contains(@class, "author")]

+ æ‰‹åŠ¨è¾“å…¥æ¡†
+ ç¼–è¾‘è§„åˆ™æŒ‰é’®
```

---

## âœ… æµ‹è¯•éªŒè¯

### æµ‹è¯•1: è·¨æ–‡ç« é€šç”¨æ€§
- åŽŸç½‘ç«™æµ‹è¯•æ–‡ç« Aï¼šä½œè€…="å¼ ä¸‰" âœ…
- åŽŸç½‘ç«™æµ‹è¯•æ–‡ç« Bï¼šä½œè€…="æŽå››" âœ…
- åŽŸç½‘ç«™æµ‹è¯•æ–‡ç« Cï¼šä½œè€…="çŽ‹äº”" âœ…

**ç»“è®º**: XPathä¸ä¾èµ–å…·ä½“æ–‡æœ¬ï¼Œé€šç”¨æ€§å¼º ðŸŽ‰

### æµ‹è¯•2: æ‰‹åŠ¨è¾“å…¥
- è¾“å…¥å¤æ‚XPath: `//div[@class='info']/span[position()=2]` âœ…
- æ­£ç¡®ä¿å­˜å¹¶åº”ç”¨ âœ…

### æµ‹è¯•3: è§„åˆ™ç¼–è¾‘
- æ·»åŠ 3ä¸ªå¤„ç†è§„åˆ™ âœ…
- è§„åˆ™æŒ‰é¡ºåºæ‰§è¡Œ âœ…
- å†…å®¹æ­£ç¡®æ¸…æ´— âœ…

---

## ðŸš€ å¿«é€Ÿå¼€å§‹

1. **å¯åŠ¨æœåŠ¡**:
   ```bash
   ./start.sh
   ```

2. **æ‰“å¼€æ™ºèƒ½å‘å¯¼**:
   ```
   http://localhost:3000/crawler/wizard
   ```

3. **è¯•ç”¨æ–°åŠŸèƒ½**:
   - æ­¥éª¤1: æ¸²æŸ“å°è¯´ä¿¡æ¯é¡µ
   - æ­¥éª¤2: æŸ¥çœ‹æ–°çš„XPathç”Ÿæˆç­–ç•¥
   - æ­¥éª¤3: å°è¯•æ‰‹åŠ¨è¾“å…¥XPath
   - æ­¥éª¤4: ç‚¹å‡»"ç¼–è¾‘è§„åˆ™"æŒ‰é’®

---

## ðŸ’¡ ä½¿ç”¨æŠ€å·§

### é€‰æ‹©XPathçš„å»ºè®®

1. **ä¼˜å…ˆé€‰æ‹©ç»¿è‰²æ ‡ç­¾** (ID/å®Œæ•´Class)
   - æœ€ç¨³å®šï¼Œä¸æ˜“å¤±æ•ˆ
   
2. **å…¶æ¬¡é€‰æ‹©è“è‰²æ ‡ç­¾** (å•ä¸ªClass/ç»“æž„è·¯å¾„)
   - è¾ƒé€šç”¨ï¼Œå…¼å®¹æ€§å¥½
   
3. **é¿å…æ©™è‰²æ ‡ç­¾** (æ–‡æœ¬æœç´¢)
   - æ¢æ–‡ç« ä¼šå¤±æ•ˆï¼Œä»…ä½œå‚è€ƒ

4. **å®žåœ¨æ²¡åˆé€‚çš„ï¼Œç”¨æ‰‹åŠ¨è¾“å…¥**
   - å¤æ‚XPath
   - ç‰¹æ®Šé¡µé¢ç»“æž„

### ç¼–è¾‘è§„åˆ™çš„æŠ€å·§

1. **å¸¸è§è§„åˆ™ç»„åˆ**:
   ```
   strip â†’ replace("å‰ç¼€", "") â†’ replace("åŽç¼€", "")
   ```

2. **å¤„ç†å¤šä½™ç©ºæ ¼**:
   ```
   strip â†’ re_sub("\\s+", " ")
   ```

3. **æå–ç‰¹å®šæ ¼å¼**:
   ```
   replace("æ ‡ç­¾ï¼š", "") â†’ split(",") â†’ get_item(0)
   ```

---

## ðŸ“Š æ”¹è¿›å¯¹æ¯”

| é¡¹ç›® | æ”¹è¿›å‰ | æ”¹è¿›åŽ |
|------|--------|--------|
| XPathé€šç”¨æ€§ | âŒ ä¾èµ–æ–‡æœ¬ï¼Œæ¢æ–‡ç« å¤±æ•ˆ | âœ… åŸºäºŽç»“æž„ï¼Œè·¨æ–‡ç« é€šç”¨ |
| è‡ªå®šä¹‰èƒ½åŠ› | âŒ åªèƒ½ä»Žå»ºè®®é€‰ | âœ… æ”¯æŒæ‰‹åŠ¨è¾“å…¥ |
| è§„åˆ™ç¼–è¾‘ | âŒ åªèƒ½ç”¨é»˜è®¤è§„åˆ™ | âœ… å¯è§†åŒ–ç¼–è¾‘æ‰€æœ‰è§„åˆ™ |
| ä¼˜å…ˆçº§æç¤º | âŒ æ—  | âœ… é¢œè‰²æ ‡ç­¾+è¯´æ˜Ž |
| æ–°æ‰‹å‹å¥½åº¦ | âš ï¸ ä¸€èˆ¬ | âœ… å‘å¯¼å¼ï¼Œæ˜“ä¸Šæ‰‹ |

---

## ðŸŽ‰ æ€»ç»“

æ‰€æœ‰ä½ æå‡ºçš„é—®é¢˜éƒ½å·²è§£å†³ï¼š

1. âœ… **XPathç”Ÿæˆ** - ä¸å†ä½¿ç”¨æ–‡æœ¬åŒ¹é…ï¼Œæ”¹ä¸ºé€šç”¨ç»“æž„åŒ–è·¯å¾„
2. âœ… **æ‰‹åŠ¨è¾“å…¥** - æ·»åŠ äº†è‡ªå®šä¹‰XPathè¾“å…¥æ¡†
3. âœ… **è§„åˆ™æ¸…æ´—** - å®Œæ•´å®žçŽ°äº†processè§„åˆ™ç¼–è¾‘åŠŸèƒ½

**çŽ°åœ¨å¯ä»¥æµ‹è¯•äº†ï¼** ðŸš€

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:3000/crawler/wizard

---

**æµ‹è¯•æŠ¥å‘Š**: [test_wizard_improved.md](tests/test_wizard_improved.md)


