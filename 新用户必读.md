# 🎉 新用户必读 - 超简单的一键启动指南

## 📝 TL;DR（太长不看版）

```bash
git clone <repository-url>
cd noval
./start.sh
```

就这么简单！🚀

## 🌟 特色功能

### ✨ 全自动安装（v5.1 新功能）

`start.sh` 脚本现在会自动完成以下**所有**准备工作：

1. **检测并安装 uv** 
   - 如果未安装，自动下载安装
   - 自动配置环境变量

2. **检测并安装 Node.js / npm**
   - 检测版本是否符合要求（Node >= 16）
   - macOS：使用 Homebrew 自动安装
   - Linux：使用 apt 自动安装

3. **创建目录结构**
   - 自动创建 logs、data、configs 等必要目录

4. **配置文件管理**
   - 从示例文件自动复制配置模板（如果不存在）

5. **Python 虚拟环境**
   - 使用 uv 自动创建和管理虚拟环境
   - 自动修复损坏的虚拟环境

6. **安装 Python 依赖**
   - 自动安装 requirements.txt 中的所有依赖

7. **Playwright 浏览器**
   - 自动安装 Playwright 和 Chromium 浏览器
   - 在 Linux 上自动安装系统依赖

8. **前端依赖**
   - 自动执行 npm install
   - 智能检测依赖是否需要更新

9. **数据库初始化**
   - 自动创建所有数据表
   - 自动创建默认管理员账户

10. **启动服务**
    - 后端 API 服务（端口 5001）
    - 前端界面（自动分配端口）

## 📊 时间估算

| 场景 | 时间 | 说明 |
|------|------|------|
| 首次运行 | 5-10分钟 | 需要下载和安装所有依赖 |
| 后续启动 | 5-10秒 | 依赖已安装，仅启动服务 |

## 🎯 完整步骤

### 第一步：克隆项目

```bash
git clone <repository-url>
cd noval
```

### 第二步：运行启动脚本

```bash
./start.sh
```

### 第三步：等待自动安装

首次运行时，脚本会：
- 🔧 检测系统环境（Linux/macOS）
- 📥 下载并安装缺失的工具
- 📦 安装所有依赖包
- 🗄️ 初始化数据库
- 🚀 启动所有服务

你会看到类似这样的输出：

```
==================================
📚 小说爬虫管理系统 v5.0
🎯 新功能：可视化元素选择器
🚀 自动化安装和配置
==================================

🍎 检测到 macOS 系统

1️⃣ 检查 uv 包管理器...
   ✓ uv 已安装: uv 0.1.0

2️⃣ 检查 Node.js 和 npm...
   ✓ Node.js: v18.19.0
   ✓ npm: 10.2.3

3️⃣ 创建必要目录...
   ✓ 目录结构创建完成

4️⃣ 检查配置文件...
   ✓ 配置文件已存在

5️⃣ 设置 Python 虚拟环境...
   ✓ 虚拟环境已存在
   ✓ Python: Python 3.10.0

6️⃣ 安装 Python 依赖包...
   ✓ Python 依赖安装完成

7️⃣ 安装 Playwright 浏览器...
   ✓ Playwright 浏览器已安装

8️⃣ 安装前端依赖...
   ✓ 前端依赖已安装

9️⃣ 初始化数据库...
   ✓ 数据库已初始化

==================================
✅ 所有准备工作已完成！
==================================

🚀 启动服务...

🔟 启动后端API (端口: 5001)...
   ✓ 后端PID: 12345
   ✓ 后端服务启动成功

1️⃣1️⃣ 启动前端界面...
   ✓ 前端PID: 12346
   ✓ 前端服务启动成功

==================================
🎉 系统启动完成！
==================================

📋 访问地址：
   前端界面: http://localhost:3000
   后端API:  http://localhost:5001

🧪 功能页面：
   配置向导: http://localhost:3000/
   爬虫管理: http://localhost:3000/crawler
   小说阅读: http://localhost:3000/reader

📊 日志监控：
   后端日志: tail -f logs/backend.log
   前端日志: tail -f logs/frontend.log

🛑 停止服务：
   运行命令: ./stop.sh
```

### 第四步：访问系统

打开浏览器，访问：

- **前端界面**: http://localhost:3000
- **后端API**: http://localhost:5001

## 🛑 停止服务

```bash
./stop.sh
```

## ⚙️ 可选配置

### 配置数据库（推荐）

如果你需要使用 MySQL 数据库：

```bash
# 复制配置文件
cp shared/utils/config.example.py shared/utils/config.py

# 编辑配置文件
vim shared/utils/config.py
```

修改数据库连接信息：
```python
DB_CONFIG = {
    'host': 'localhost',
    'port': 3306,
    'user': 'your_user',
    'password': 'your_password',
    'database': 'novel_db'
}
```

然后重新运行 `./start.sh`

## ❓ 常见问题

### Q: 我的系统是 Windows，怎么办？

A: Windows 用户需要：
1. 手动安装 uv: `powershell -c "irm https://astral.sh/uv/install.ps1 | iex"`
2. 手动安装 Node.js
3. 运行 `start.bat`

### Q: 脚本卡在某个步骤不动了？

A: 
- 检查网络连接（可能在下载依赖）
- 查看日志文件：`tail -f logs/backend.log`
- 按 `Ctrl+C` 停止，然后重新运行

### Q: 提示权限不足？

A:
- 确保脚本有执行权限：`chmod +x start.sh`
- Linux 上安装系统依赖可能需要 sudo 权限

### Q: Node.js/npm 安装失败？

A:
- macOS：先安装 Homebrew: `/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"`
- Linux：确保有 sudo 权限，或手动安装 Node.js

### Q: 数据库连接失败？

A:
- 检查 MySQL 服务是否启动
- 检查配置文件 `shared/utils/config.py`
- 确保数据库用户有足够权限

### Q: 端口被占用怎么办？

A:
- 后端默认使用 5001 端口，可以修改 `backend/api.py`
- 前端会自动选择可用端口（通常是 3000-3010）

## 📚 下一步

启动成功后，你可以：

1. **阅读文档**
   - [功能说明](docs/功能说明.md)
   - [V5 使用指南](docs/V5_使用指南.md)
   - [快速开始指南](docs/快速开始指南.md)

2. **配置爬虫**
   - 使用可视化向导创建爬虫配置
   - 或编辑 `configs/` 目录下的 JSON 配置文件

3. **开始爬取**
   - 在爬虫管理页面启动任务
   - 实时查看爬取进度

4. **阅读小说**
   - 在小说阅读器中浏览已爬取的内容
   - 自定义阅读体验

## 🎉 享受使用！

如有问题，请查看详细文档或提交 Issue。

---

**记住**：对于 Linux/macOS 用户，真的只需要一条命令：

```bash
./start.sh
```

就是这么简单！🚀

